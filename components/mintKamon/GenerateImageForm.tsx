import { useAccount } from 'wagmi'
import { useState } from 'react'
import { Button, Heading, Text, FormControl, FormLabel, Input } from '@chakra-ui/react'
import { Layout } from '@/components/layouts/layout'

const GenerateImageForm = () => {
  const { data } = useAccount()
  const [input, setInput] = useState('')
  const handleInputChange = (e: any) => setInput(e.target.value)
  const isError = input === ''

  const submitGenerateImage = async (event: any) => {
    event.preventDefault()
    const payLoad = {
      name: event.target.name.value,
      address: data?.address,
      roles: ['Community member'],
      points: 100,
      date: ~~(new Date().getTime() / 1000),
      profilePicture: 'data:image/jpeg;base64,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',
    }
    console.log(payLoad)
    console.log(JSON.stringify(payLoad))

    const res = await fetch(
      'http://localhost:4100/ipfs',
      {
        body: JSON.stringify(payLoad),
        headers: {
          'Content-Type': 'application/json',
        },
        method: 'POST',
        mode : 'no-cors'
      },
    )
    console.log(await res)
    // const result = await res.json()
  }

  return (
    <Layout>
      <Heading mt={50}>Henkaku Kamon NFT</Heading>
      <form onSubmit={ submitGenerateImage }>
        <FormLabel mt={10}>Your address</FormLabel>
        <Text mt={5} fontSize='xs'>{ data?.address }</Text>
        <FormControl isInvalid={isError} isRequired>
          <FormLabel mt={10}>Your name or nickname</FormLabel>
          <Input
            mt={5}
            placeholder='Your name'
            onChange={handleInputChange}
          />
        </FormControl>
        <FormControl isInvalid={isError} isRequired>
          <FormLabel mt={10}>Your profile picture for the Kamon NFT</FormLabel>
          <Input
            pt={1}
            mt={5}
            color='gray.300'
            type='file'
            accept={'image/*'}
            isRequired={true}
            placeholder='Upload an JPG or PNG'
          />
        </FormControl>
        <Button
          mt={10}
          colorScheme='teal'
          type='submit'
        >
          Generate Image
        </Button>
      </form>
    </Layout>
  )
}

export { GenerateImageForm }
